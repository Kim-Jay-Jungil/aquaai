<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Aqua.AI - ìˆ˜ì¤‘ ì‚¬ì§„ ìë™ë³´ì • ì„œë¹„ìŠ¤</title>
  <link rel="stylesheet" href="/styles.css" />
</head>
<body>
  <header class="nav">
    <a class="brand" href="/">Aqua.AI</a>
    <nav class="nav-links">
      <a href="/signin.html">ë¡œê·¸ì¸</a>
      <a href="/signup.html">íšŒì›ê°€ì…</a>
    </nav>
  </header>

  <main class="wrap">
    <section class="hero">
      <h1>ìˆ˜ì¤‘ ì‚¬ì§„ì„ ìë™ìœ¼ë¡œ ë³´ì •í•˜ì„¸ìš”</h1>
      <p class="hero-subtitle">
        AIê°€ ë¸”ë£¨/ê·¸ë¦° í†¤ì„ ì œê±°í•˜ê³  ìƒ‰ìƒì„ ë³µì›í•˜ì—¬ 
        ìˆ˜ì¤‘ì—ì„œ ì°ì€ ì‚¬ì§„ì„ ìì—°ìŠ¤ëŸ½ê²Œ ë§Œë“¤ì–´ë“œë¦½ë‹ˆë‹¤
      </p>
    </section>

    <section class="upload-section">
      <div class="card">
        <h2>ì´ë¯¸ì§€ ì—…ë¡œë“œ ë° ë³´ì •</h2>
        
        <!-- API í…ŒìŠ¤íŠ¸ ì„¹ì…˜ ì¶”ê°€ -->
        <div class="api-test-section" style="margin-bottom: 2rem; padding: 1rem; background: #f8f9fa; border-radius: 8px;">
          <h3>ğŸ”§ API ìƒíƒœ í™•ì¸</h3>
          <p>ë¬¸ì œ ì§„ë‹¨ì„ ìœ„í•´ API ìƒíƒœë¥¼ ë¨¼ì € í™•ì¸í•´ë³´ì„¸ìš”.</p>
          <button id="simpleApiBtn" class="btn btn-outline" style="margin-right: 10px;">ê°„ë‹¨ API í…ŒìŠ¤íŠ¸</button>
          <button id="apiTestBtn" class="btn btn-outline" style="margin-right: 10px;">API í…ŒìŠ¤íŠ¸</button>
          <button id="s3TestBtn" class="btn btn-outline" style="margin-right: 10px;">S3 í…ŒìŠ¤íŠ¸</button>
          <button id="notionTestBtn" class="btn btn-outline" style="margin-right: 10px;">Notion í…ŒìŠ¤íŠ¸</button>
          <button id="envCheckBtn" class="btn btn-outline">í™˜ê²½ë³€ìˆ˜ í™•ì¸</button>
          <div id="apiTestResult" style="margin-top: 1rem; padding: 1rem; border-radius: 5px; font-family: monospace; font-size: 14px; display: none;"></div>
        </div>
        
        <div class="upload-area" id="uploadArea">
          <div class="upload-placeholder">
            <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
              <polyline points="7,10 12,15 17,10"/>
              <line x1="12" y1="15" x2="12" y2="3"/>
            </svg>
            <p>í´ë¦­í•˜ì—¬ ì´ë¯¸ì§€ë¥¼ ì„ íƒí•˜ê±°ë‚˜ ë“œë˜ê·¸í•˜ì—¬ ì—…ë¡œë“œí•˜ì„¸ìš”</p>
            <p class="upload-hint">JPG, PNG, HEIC ì§€ì› (ìµœëŒ€ 10MB)</p>
          </div>
          <input id="fileInput" type="file" accept="image/*" multiple />
        </div>

        <div class="enhancement-options">
          <h3>ë³´ì • ê°•ë„ ì„ íƒ</h3>
          <div class="option-buttons">
            <button class="option-btn active" data-level="auto">ìë™</button>
            <button class="option-btn" data-level="light">ì•½í•¨</button>
            <button class="option-btn" data-level="medium">ë³´í†µ</button>
            <button class="option-btn" data-level="strong">ê°•í•¨</button>
          </div>
        </div>

        <div class="user-info">
          <h3>ì‚¬ìš©ì ì •ë³´ (ì„ íƒì‚¬í•­)</h3>
          <input type="email" id="userEmail" placeholder="ì´ë©”ì¼ ì£¼ì†Œ (ì„ íƒì‚¬í•­)" />
          <p class="info-text">ì´ë©”ì¼ì„ ì…ë ¥í•˜ë©´ ì²˜ë¦¬ ê²°ê³¼ë¥¼ ì¶”ì í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
        </div>

        <button id="enhanceButton" class="btn btn-primary" disabled>
          ì´ë¯¸ì§€ ë³´ì • ì‹œì‘
        </button>

        <div id="progressBar" class="progress-bar hidden">
          <div class="progress-fill"></div>
        </div>
      </div>
    </section>

    <section class="results-section hidden" id="resultsSection">
      <div class="card">
        <h2>ë³´ì • ê²°ê³¼</h2>
        <div id="resultsGrid" class="results-grid">
          <!-- ê²°ê³¼ ì´ë¯¸ì§€ë“¤ì´ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤ -->
        </div>
        
        <!-- ì´ë¯¸ì§€ ë¹„êµ ìŠ¬ë¼ì´ë” ì„¹ì…˜ -->
        <div id="comparisonSection" class="comparison-section hidden">
          <h3>ì „/í›„ ë¹„êµ</h3>
          <div class="comparison-container">
            <div class="image-comparison-slider">
              <div class="image-wrapper">
                <img id="originalImage" src="" alt="ì›ë³¸ ì´ë¯¸ì§€" />
                <img id="enhancedImage" src="" alt="í–¥ìƒëœ ì´ë¯¸ì§€" />
              </div>
              <div class="slider-handle">
                <div class="slider-line"></div>
                <div class="slider-circle">
                  <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                    <path d="M8 5L16 12L8 19" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    <path d="M16 5L24 12L16 19" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                  </svg>
                </div>
              </div>
              <div class="slider-labels">
                <span class="label-original">ì›ë³¸</span>
                <span class="label-enhanced">í–¥ìƒë¨</span>
              </div>
            </div>
          </div>
        </div>
        
        <div class="results-actions">
          <button id="downloadAllBtn" class="btn btn-secondary">ì „ì²´ ë‹¤ìš´ë¡œë“œ</button>
          <button id="shareBtn" class="btn btn-outline">ê³µìœ í•˜ê¸°</button>
        </div>
      </div>
    </section>

    <section class="features">
      <div class="card">
        <h2>ì„œë¹„ìŠ¤ íŠ¹ì§•</h2>
        <div class="features-grid">
          <div class="feature">
            <h3>ğŸ¯ ìë™ ìƒ‰ìƒ ë³´ì •</h3>
            <p>ìˆ˜ì¤‘ í™˜ê²½ì˜ ë¸”ë£¨/ê·¸ë¦° í†¤ì„ ìë™ìœ¼ë¡œ ê°ì§€í•˜ê³  ì œê±°</p>
          </div>
          <div class="feature">
            <h3>âš¡ ë¹ ë¥¸ ì²˜ë¦¬</h3>
            <p>AI ê¸°ë°˜ìœ¼ë¡œ 10ì´ˆ ë‚´ì— ì´ë¯¸ì§€ ë³´ì • ì™„ë£Œ</p>
          </div>
          <div class="feature">
            <h3>ğŸ“± ëª¨ë“  ê¸°ê¸° ì§€ì›</h3>
            <p>ëª¨ë°”ì¼, íƒœë¸”ë¦¿, ë°ìŠ¤í¬í†±ì—ì„œ í¸ë¦¬í•˜ê²Œ ì‚¬ìš©</p>
          </div>
          <div class="feature">
            <h3>ğŸ”’ ì•ˆì „í•œ ì €ì¥</h3>
            <p>ì—…ë¡œë“œëœ ì´ë¯¸ì§€ëŠ” ìë™ìœ¼ë¡œ ì‚­ì œë˜ì–´ ê°œì¸ì •ë³´ ë³´í˜¸</p>
          </div>
        </div>
      </div>
    </section>

    <section class="pricing">
      <div class="card">
        <h2>ìš”ê¸ˆì œ</h2>
        <div class="pricing-grid">
          <div class="pricing-card">
            <h3>ë¬´ë£Œ</h3>
            <div class="price">â‚©0</div>
            <ul>
              <li>ì›” 5ì¥ ì´ë¯¸ì§€ ë³´ì •</li>
              <li>ê¸°ë³¸ ë³´ì • ê¸°ëŠ¥</li>
              <li>ì›¹ì—ì„œ ì§ì ‘ ì‚¬ìš©</li>
            </ul>
            <button class="btn btn-outline">ì‹œì‘í•˜ê¸°</button>
          </div>
          <div class="pricing-card featured">
            <h3>í”„ë¡œ</h3>
            <div class="price">â‚©19,900<span>/ì›”</span></div>
            <ul>
              <li>ì›” 100ì¥ ì´ë¯¸ì§€ ë³´ì •</li>
              <li>ê³ ê¸‰ ë³´ì • ì˜µì…˜</li>
              <li>ë°°ì¹˜ ì²˜ë¦¬</li>
              <li>ìš°ì„  ì§€ì›</li>
            </ul>
            <button class="btn btn-primary">í”„ë¡œ ì‹œì‘í•˜ê¸°</button>
          </div>
          <div class="pricing-card">
            <h3>ë¹„ì¦ˆë‹ˆìŠ¤</h3>
            <div class="price">â‚©49,900<span>/ì›”</span></div>
            <ul>
              <li>ì›” 1,000ì¥ ì´ë¯¸ì§€ ë³´ì •</li>
              <li>API ì ‘ê·¼</li>
              <li>ì „ìš© ì§€ì›</li>
              <li>ë§ì¶¤í˜• ì†”ë£¨ì…˜</li>
            </ul>
            <button class="btn btn-outline">ë¬¸ì˜í•˜ê¸°</button>
          </div>
        </div>
      </div>
    </section>
  </main>

  <footer class="foot">
    <div class="footer-content">
      <div class="footer-section">
        <h4>Aqua.AI</h4>
        <p>ìˆ˜ì¤‘ ì‚¬ì§„ì„ ì•„ë¦„ë‹µê²Œ ë§Œë“œëŠ” AI ì„œë¹„ìŠ¤</p>
      </div>
      <div class="footer-section">
        <h4>ì„œë¹„ìŠ¤</h4>
        <a href="/">í™ˆ</a>
        <a href="/upload.html">ì—…ë¡œë“œ</a>
        <a href="/pricing">ìš”ê¸ˆì œ</a>
      </div>
      <div class="footer-section">
        <h4>ì§€ì›</h4>
        <a href="/help">ë„ì›€ë§</a>
        <a href="/contact">ë¬¸ì˜</a>
        <a href="/privacy">ê°œì¸ì •ë³´ì²˜ë¦¬ë°©ì¹¨</a>
      </div>
    </div>
    <div class="footer-bottom">
      Â© 2024 Aqua.AI. All rights reserved.
    </div>
  </footer>

  <script>
    // ê°„ë‹¨í•œ ë””ë²„ê¹… ìŠ¤í¬ë¦½íŠ¸
    console.log('ğŸš€ index.html ë¡œë“œë¨');
    
    // DOM ë¡œë“œ ì™„ë£Œ í™•ì¸
    document.addEventListener('DOMContentLoaded', function() {
      console.log('ğŸ“‹ DOM ë¡œë“œ ì™„ë£Œ');
      
      // API í…ŒìŠ¤íŠ¸ ë²„íŠ¼ë“¤ í™•ì¸
      const simpleApiBtn = document.getElementById('simpleApiBtn');
      const apiTestBtn = document.getElementById('apiTestBtn');
      const s3TestBtn = document.getElementById('s3TestBtn');
      const envCheckBtn = document.getElementById('envCheckBtn');
      
      console.log('ğŸ”˜ ë²„íŠ¼ ìš”ì†Œë“¤:', {
        simpleApiBtn,
        apiTestBtn,
        s3TestBtn,
        envCheckBtn
      });
      
      // ê°„ë‹¨í•œ API í…ŒìŠ¤íŠ¸ í•¨ìˆ˜ë“¤ (ì„ì‹œ)
      if (simpleApiBtn) {
        simpleApiBtn.addEventListener('click', async function() {
          console.log('ğŸ” ê°„ë‹¨ API í…ŒìŠ¤íŠ¸ ë²„íŠ¼ í´ë¦­ë¨');
          const resultDiv = document.getElementById('apiTestResult');
          resultDiv.style.display = 'block';
          resultDiv.textContent = 'ê°„ë‹¨ API í…ŒìŠ¤íŠ¸ ì¤‘...';
          
          try {
            const response = await fetch('/api/test-simple');
            const data = await response.json();
            resultDiv.textContent = `âœ… ì„±ê³µ: ${JSON.stringify(data, null, 2)}`;
          } catch (error) {
            resultDiv.textContent = `âŒ ì˜¤ë¥˜: ${error.message}`;
          }
        });
        console.log('âœ… ê°„ë‹¨ API í…ŒìŠ¤íŠ¸ ë²„íŠ¼ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì¶”ê°€ë¨');
      }
      
      if (apiTestBtn) {
        apiTestBtn.addEventListener('click', async function() {
          console.log('ğŸ” API í…ŒìŠ¤íŠ¸ ë²„íŠ¼ í´ë¦­ë¨');
          const resultDiv = document.getElementById('apiTestResult');
          resultDiv.style.display = 'block';
          resultDiv.textContent = 'API í…ŒìŠ¤íŠ¸ ì¤‘...';
          
          try {
            const response = await fetch('/api/health');
            const data = await response.json();
            resultDiv.textContent = `âœ… ì„±ê³µ: ${JSON.stringify(data, null, 2)}`;
          } catch (error) {
            resultDiv.textContent = `âŒ ì˜¤ë¥˜: ${error.message}`;
          }
        });
        console.log('âœ… API í…ŒìŠ¤íŠ¸ ë²„íŠ¼ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì¶”ê°€ë¨');
      }
      
      if (s3TestBtn) {
        s3TestBtn.addEventListener('click', async function() {
          console.log('ğŸ” S3 í…ŒìŠ¤íŠ¸ ë²„íŠ¼ í´ë¦­ë¨');
          const resultDiv = document.getElementById('apiTestResult');
          resultDiv.style.display = 'block';
          resultDiv.textContent = 'S3 í…ŒìŠ¤íŠ¸ ì¤‘...';
          
          try {
            const response = await fetch('/api/presign-put', {
              method: 'POST',
              headers: { 'content-type': 'application/json' },
              body: JSON.stringify({
                filename: 'test-image.jpg',
                contentType: 'image/jpeg'
              })
            });
            const data = await response.json();
            resultDiv.textContent = `âœ… ì„±ê³µ: ${JSON.stringify(data, null, 2)}`;
          } catch (error) {
            resultDiv.textContent = `âŒ ì˜¤ë¥˜: ${error.message}`;
          }
        });
        console.log('âœ… S3 í…ŒìŠ¤íŠ¸ ë²„íŠ¼ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì¶”ê°€ë¨');
      }
      
      if (envCheckBtn) {
        envCheckBtn.addEventListener('click', async function() {
          console.log('ğŸ” í™˜ê²½ë³€ìˆ˜ í™•ì¸ ë²„íŠ¼ í´ë¦­ë¨');
          const resultDiv = document.getElementById('apiTestResult');
          resultDiv.style.display = 'block';
          resultDiv.textContent = 'í™˜ê²½ë³€ìˆ˜ í™•ì¸ ì¤‘...';
          
          try {
            const response = await fetch('/api/debug-env');
            const data = await response.json();
            resultDiv.textContent = `âœ… ì„±ê³µ: ${JSON.stringify(data, null, 2)}`;
          } catch (error) {
            resultDiv.textContent = `âŒ ì˜¤ë¥˜: ${error.message}`;
          }
        });
        console.log('âœ… í™˜ê²½ë³€ìˆ˜ í™•ì¸ ë²„íŠ¼ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì¶”ê°€ë¨');
      }
      
      // ì´ë¯¸ì§€ URL í…ŒìŠ¤íŠ¸ ê¸°ëŠ¥ ì¶”ê°€
      const testImageBtn = document.createElement('button');
      testImageBtn.textContent = 'ğŸ–¼ï¸ ì´ë¯¸ì§€ URL í…ŒìŠ¤íŠ¸';
      testImageBtn.className = 'btn btn-outline';
      testImageBtn.style.marginTop = '10px';
      testImageBtn.onclick = function() {
        const url = prompt('í…ŒìŠ¤íŠ¸í•  ì´ë¯¸ì§€ URLì„ ì…ë ¥í•˜ì„¸ìš”:');
        if (url) {
          console.log('ğŸ–¼ï¸ ì´ë¯¸ì§€ URL í…ŒìŠ¤íŠ¸:', url);
          const img = new Image();
          img.onload = function() {
            console.log('âœ… ì´ë¯¸ì§€ ë¡œë“œ ì„±ê³µ:', url);
            alert('ì´ë¯¸ì§€ ë¡œë“œ ì„±ê³µ!');
          };
          img.onerror = function() {
            console.log('âŒ ì´ë¯¸ì§€ ë¡œë“œ ì‹¤íŒ¨:', url);
            alert('ì´ë¯¸ì§€ ë¡œë“œ ì‹¤íŒ¨!');
          };
          img.src = url;
        }
      };
      
      // ê°„ë‹¨í•œ íŒŒì¼ ì—…ë¡œë“œ í…ŒìŠ¤íŠ¸ ê¸°ëŠ¥ ì¶”ê°€
      const testUploadBtn = document.createElement('button');
      testUploadBtn.textContent = 'ğŸ“¤ ê°„ë‹¨ ì—…ë¡œë“œ í…ŒìŠ¤íŠ¸';
      testUploadBtn.className = 'btn btn-outline';
      testUploadBtn.style.marginTop = '10px';
      testUploadBtn.style.marginLeft = '10px';
      testUploadBtn.onclick = async function() {
        try {
          console.log('ğŸ” ê°„ë‹¨í•œ ì—…ë¡œë“œ í…ŒìŠ¤íŠ¸ ì‹œì‘');
          
          // í…ŒìŠ¤íŠ¸ìš© ë”ë¯¸ íŒŒì¼ ìƒì„±
          const testFile = new File(['test'], 'test-image.jpg', { type: 'image/jpeg' });
          console.log('ğŸ“ í…ŒìŠ¤íŠ¸ íŒŒì¼ ìƒì„±:', testFile);
          
          // Presign API í…ŒìŠ¤íŠ¸
          const response = await fetch('/api/presign-put', {
            method: 'POST',
            headers: { 'content-type': 'application/json' },
            body: JSON.stringify({
              filename: 'test-image.jpg',
              contentType: 'image/jpeg'
            })
          });
          
          console.log('ğŸ“¡ Presign API ì‘ë‹µ:', response.status, response.statusText);
          
          if (response.ok) {
            const data = await response.json();
            console.log('âœ… Presign API ì„±ê³µ:', data);
            
            // ì‹¤ì œ S3 ì—…ë¡œë“œ í…ŒìŠ¤íŠ¸
            if (data.url) {
              console.log('ğŸ”— S3 ì—…ë¡œë“œ í…ŒìŠ¤íŠ¸ ì‹œì‘...');
              const uploadResponse = await fetch(data.url, {
                method: 'PUT',
                headers: { 
                  'content-type': 'image/jpeg',
                  'x-amz-acl': 'public-read'
                },
                body: testFile
              });
              
              console.log('ğŸ“¤ S3 ì—…ë¡œë“œ ì‘ë‹µ:', uploadResponse.status, uploadResponse.statusText);
              
              if (uploadResponse.ok) {
                alert('âœ… ì „ì²´ ì—…ë¡œë“œ í…ŒìŠ¤íŠ¸ ì„±ê³µ!\n\nPresign API: ì„±ê³µ\nS3 ì—…ë¡œë“œ: ì„±ê³µ');
              } else {
                const errorText = await uploadResponse.text();
                alert('âŒ S3 ì—…ë¡œë“œ ì‹¤íŒ¨!\n\nPresign API: ì„±ê³µ\nS3 ì—…ë¡œë“œ: ì‹¤íŒ¨\n\nìƒíƒœ: ' + uploadResponse.status + '\nì˜¤ë¥˜: ' + errorText);
              }
            } else {
              alert('Presign API ì„±ê³µí–ˆì§€ë§Œ URLì´ ì—†ìŠµë‹ˆë‹¤:\n\n' + JSON.stringify(data, null, 2));
            }
          } else {
            const errorData = await response.json();
            console.error('âŒ Presign API ì‹¤íŒ¨:', errorData);
            alert('Presign API í…ŒìŠ¤íŠ¸ ì‹¤íŒ¨!\n\n' + JSON.stringify(errorData, null, 2));
          }
          
        } catch (error) {
          console.error('ğŸ’¥ ì—…ë¡œë“œ í…ŒìŠ¤íŠ¸ ì˜¤ë¥˜:', error);
          alert('ì—…ë¡œë“œ í…ŒìŠ¤íŠ¸ ì˜¤ë¥˜: ' + error.message);
        }
      };
      
      // ì‹¤ì œ íŒŒì¼ë¡œ ì—…ë¡œë“œ í…ŒìŠ¤íŠ¸í•˜ëŠ” ê¸°ëŠ¥ ì¶”ê°€
      const testRealFileBtn = document.createElement('button');
      testRealFileBtn.textContent = 'ğŸ“ ì‹¤ì œ íŒŒì¼ í…ŒìŠ¤íŠ¸';
      testRealFileBtn.className = 'btn btn-outline';
      testRealFileBtn.style.marginTop = '10px';
      testRealFileBtn.style.marginLeft = '10px';
      testRealFileBtn.onclick = function() {
        const input = document.createElement('input');
        input.type = 'file';
        input.accept = 'image/*';
        input.onchange = async function(e) {
          const file = e.target.files[0];
          if (file) {
            console.log('ğŸ“ ì„ íƒëœ íŒŒì¼:', file);
            console.log('ğŸ“‹ íŒŒì¼ ì •ë³´:', {
              name: file.name,
              size: file.size,
              type: file.type,
              lastModified: new Date(file.lastModified).toISOString()
            });
            
            try {
              console.log('ğŸ” Presign API í˜¸ì¶œ ì‹œì‘...');
              
              // Presign API í˜¸ì¶œ
              const response = await fetch('/api/presign-put', {
                method: 'POST',
                headers: { 'content-type': 'application/json' },
                body: JSON.stringify({
                  filename: file.name,
                  contentType: file.type
                })
              });
              
              console.log('ğŸ“¡ Presign API ì‘ë‹µ:', response.status, response.statusText);
              console.log('ğŸ“‹ ì‘ë‹µ í—¤ë”:', Object.fromEntries(response.headers.entries()));
              
              if (response.ok) {
                const data = await response.json();
                console.log('âœ… Presign API ì„±ê³µ:', data);
                
                if (!data.url) {
                  throw new Error('Presign ì‘ë‹µì— URLì´ ì—†ìŠµë‹ˆë‹¤: ' + JSON.stringify(data));
                }
                
                console.log('ğŸ”— S3 ì—…ë¡œë“œ ì‹œì‘...');
                console.log('ğŸ“‹ ì—…ë¡œë“œ ì •ë³´:', {
                  url: data.url,
                  method: 'PUT',
                  contentType: file.type,
                  fileSize: file.size
                });
                
                // S3 ì—…ë¡œë“œ
                const uploadResponse = await fetch(data.url, {
                  method: 'PUT',
                  headers: { 
                    'content-type': file.type,
                    'x-amz-acl': 'public-read'
                  },
                  body: file
                });
                
                console.log('ğŸ“¤ S3 ì—…ë¡œë“œ ì‘ë‹µ:', uploadResponse.status, uploadResponse.statusText);
                console.log('ğŸ“‹ S3 ì‘ë‹µ í—¤ë”:', Object.fromEntries(uploadResponse.headers.entries()));
                
                if (uploadResponse.ok) {
                  alert(`âœ… íŒŒì¼ ì—…ë¡œë“œ ì„±ê³µ!\n\níŒŒì¼: ${file.name}\ní¬ê¸°: ${(file.size / 1024).toFixed(2)}KB\níƒ€ì…: ${file.type}\n\nS3 Key: ${data.key || 'N/A'}\nPublic URL: ${data.publicUrl || 'N/A'}`);
                } else {
                  const errorText = await uploadResponse.text();
                  console.error('âŒ S3 ì—…ë¡œë“œ ì‹¤íŒ¨:', errorText);
                  alert(`âŒ S3 ì—…ë¡œë“œ ì‹¤íŒ¨!\n\níŒŒì¼: ${file.name}\nìƒíƒœ: ${uploadResponse.status}\nìƒíƒœ í…ìŠ¤íŠ¸: ${uploadResponse.statusText}\n\nì˜¤ë¥˜ ë‚´ìš©: ${errorText}`);
                }
              } else {
                const errorData = await response.json().catch(() => ({ error: 'ì‘ë‹µì„ JSONìœ¼ë¡œ íŒŒì‹±í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤' }));
                console.error('âŒ Presign API ì‹¤íŒ¨:', errorData);
                alert(`âŒ Presign API ì‹¤íŒ¨!\n\níŒŒì¼: ${file.name}\nìƒíƒœ: ${response.status}\nìƒíƒœ í…ìŠ¤íŠ¸: ${response.statusText}\n\nì˜¤ë¥˜: ${JSON.stringify(errorData, null, 2)}`);
              }
            } catch (error) {
              console.error('ğŸ’¥ ì—…ë¡œë“œ í…ŒìŠ¤íŠ¸ ì˜¤ë¥˜:', error);
              console.error('ğŸ’¥ ì˜¤ë¥˜ ìƒì„¸:', {
                name: error.name,
                message: error.message,
                stack: error.stack
              });
              
              let errorMessage = error.message;
              if (error.message === 'Failed to fetch') {
                errorMessage = 'ë„¤íŠ¸ì›Œí¬ ìš”ì²­ ì‹¤íŒ¨: API ì—”ë“œí¬ì¸íŠ¸ì— ì—°ê²°í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ì„œë²„ ìƒíƒœë¥¼ í™•ì¸í•˜ì„¸ìš”.';
              }
              
              alert(`âŒ ì—…ë¡œë“œ í…ŒìŠ¤íŠ¸ ì˜¤ë¥˜!\n\níŒŒì¼: ${file.name}\nì˜¤ë¥˜: ${errorMessage}\n\nğŸ’¡ ë¸Œë¼ìš°ì € ê°œë°œì ë„êµ¬(F12)ì˜ ì½˜ì†” íƒ­ì—ì„œ ìƒì„¸í•œ ì˜¤ë¥˜ ë¡œê·¸ë¥¼ í™•ì¸í•˜ì„¸ìš”.`);
            }
          }
        };
        input.click();
      };
      
      // API ìƒíƒœ í™•ì¸ ê¸°ëŠ¥ ì¶”ê°€
      const checkApiStatusBtn = document.createElement('button');
      checkApiStatusBtn.textContent = 'ğŸ” API ìƒíƒœ í™•ì¸';
      checkApiStatusBtn.className = 'btn btn-outline';
      checkApiStatusBtn.style.marginTop = '10px';
      checkApiStatusBtn.style.marginLeft = '10px';
      checkApiStatusBtn.onclick = async function() {
        try {
          console.log('ğŸ” API ìƒíƒœ í™•ì¸ ì‹œì‘...');
          
          // 1. ê¸°ë³¸ API ì—”ë“œí¬ì¸íŠ¸ í™•ì¸
          const healthResponse = await fetch('/api/health');
          console.log('ğŸ“¡ Health API ì‘ë‹µ:', healthResponse.status, healthResponse.statusText);
          
          // 2. Presign API ì—”ë“œí¬ì¸íŠ¸ í™•ì¸
          const presignResponse = await fetch('/api/presign-put', {
            method: 'POST',
            headers: { 'content-type': 'application/json' },
            body: JSON.stringify({
              filename: 'test.jpg',
              contentType: 'image/jpeg'
            })
          });
          console.log('ğŸ“¡ Presign API ì‘ë‹µ:', presignResponse.status, presignResponse.statusText);
          
          // 3. ê²°ê³¼ ìš”ì•½
          let statusMessage = 'ğŸ” API ìƒíƒœ í™•ì¸ ê²°ê³¼:\n\n';
          
          if (healthResponse.ok) {
            statusMessage += 'âœ… Health API: ì •ìƒ\n';
          } else {
            statusMessage += `âŒ Health API: ${healthResponse.status} ${healthResponse.statusText}\n`;
          }
          
          if (presignResponse.ok) {
            statusMessage += 'âœ… Presign API: ì •ìƒ\n';
          } else {
            statusMessage += `âŒ Presign API: ${presignResponse.status} ${presignResponse.statusText}\n`;
          }
          
          // 4. ë„¤íŠ¸ì›Œí¬ ìƒíƒœ í™•ì¸
          const networkInfo = {
            userAgent: navigator.userAgent,
            online: navigator.onLine,
            connection: navigator.connection ? {
              effectiveType: navigator.connection.effectiveType,
              downlink: navigator.connection.downlink
            } : 'N/A'
          };
          
          statusMessage += `\nğŸŒ ë„¤íŠ¸ì›Œí¬ ì •ë³´:\n`;
          statusMessage += `ì˜¨ë¼ì¸ ìƒíƒœ: ${networkInfo.online ? 'âœ… ì˜¨ë¼ì¸' : 'âŒ ì˜¤í”„ë¼ì¸'}\n`;
          if (networkInfo.connection !== 'N/A') {
            statusMessage += `ì—°ê²° íƒ€ì…: ${networkInfo.connection.effectiveType}\n`;
            statusMessage += `ë‹¤ìš´ë¡œë“œ ì†ë„: ${networkInfo.connection.downlink} Mbps\n`;
          }
          
          console.log('ğŸ“‹ API ìƒíƒœ í™•ì¸ ì™„ë£Œ:', statusMessage);
          alert(statusMessage);
          
        } catch (error) {
          console.error('ğŸ’¥ API ìƒíƒœ í™•ì¸ ì˜¤ë¥˜:', error);
          alert(`âŒ API ìƒíƒœ í™•ì¸ ì‹¤íŒ¨!\n\nì˜¤ë¥˜: ${error.message}\n\nğŸ’¡ ë¸Œë¼ìš°ì € ê°œë°œì ë„êµ¬(F12)ì˜ ì½˜ì†” íƒ­ì—ì„œ ìƒì„¸í•œ ì˜¤ë¥˜ ë¡œê·¸ë¥¼ í™•ì¸í•˜ì„¸ìš”.`);
        }
      };
      
      // S3 CORS ì„¤ì • í…ŒìŠ¤íŠ¸ ê¸°ëŠ¥ ì¶”ê°€
      const testS3CorsBtn = document.createElement('button');
      testS3CorsBtn.textContent = 'ğŸŒ S3 CORS í…ŒìŠ¤íŠ¸';
      testS3CorsBtn.className = 'btn btn-outline';
      testS3CorsBtn.style.marginTop = '10px';
      testS3CorsBtn.style.marginLeft = '10px';
      testS3CorsBtn.onclick = async function() {
        try {
          console.log('ğŸ” S3 CORS ì„¤ì • í…ŒìŠ¤íŠ¸ ì‹œì‘...');
          
          // 1. Presign API í˜¸ì¶œ
          const presignResponse = await fetch('/api/presign-put', {
            method: 'POST',
            headers: { 'content-type': 'application/json' },
            body: JSON.stringify({
              filename: 'cors-test.txt',
              contentType: 'text/plain'
            })
          });
          
          if (!presignResponse.ok) {
            throw new Error(`Presign API ì‹¤íŒ¨: ${presignResponse.status}`);
          }
          
          const presignData = await presignResponse.json();
          console.log('âœ… Presign API ì„±ê³µ:', presignData);
          
          // 2. ê°„ë‹¨í•œ í…ìŠ¤íŠ¸ë¡œ S3 ì—…ë¡œë“œ í…ŒìŠ¤íŠ¸
          const testContent = 'CORS Test Content - ' + new Date().toISOString();
          const testBlob = new Blob([testContent], { type: 'text/plain' });
          
          console.log('ğŸ”— S3 CORS í…ŒìŠ¤íŠ¸ ì—…ë¡œë“œ ì‹œì‘...');
          
          const corsTestResponse = await fetch(presignData.url, {
            method: 'PUT',
            headers: { 
              'content-type': 'text/plain'
            },
            body: testBlob
          });
          
          console.log('ğŸ“¤ S3 CORS í…ŒìŠ¤íŠ¸ ì‘ë‹µ:', corsTestResponse.status, corsTestResponse.statusText);
          
          if (corsTestResponse.ok) {
            alert('âœ… S3 CORS í…ŒìŠ¤íŠ¸ ì„±ê³µ!\n\nS3 ì§ì ‘ ì—…ë¡œë“œê°€ ì •ìƒì ìœ¼ë¡œ ì‘ë™í•©ë‹ˆë‹¤.\n\nPresign API: ì„±ê³µ\nS3 ì—…ë¡œë“œ: ì„±ê³µ');
          } else {
            const errorText = await corsTestResponse.text();
            alert(`âŒ S3 CORS í…ŒìŠ¤íŠ¸ ì‹¤íŒ¨!\n\nìƒíƒœ: ${corsTestResponse.status}\nì˜¤ë¥˜: ${errorText}\n\nğŸ’¡ S3 ë²„í‚·ì˜ CORS ì„¤ì •ì„ í™•ì¸í•˜ì„¸ìš”.`);
          }
          
        } catch (error) {
          console.error('ğŸ’¥ S3 CORS í…ŒìŠ¤íŠ¸ ì˜¤ë¥˜:', error);
          alert(`âŒ S3 CORS í…ŒìŠ¤íŠ¸ ì˜¤ë¥˜!\n\nì˜¤ë¥˜: ${error.message}\n\nğŸ’¡ ë¸Œë¼ìš°ì € ê°œë°œì ë„êµ¬(F12)ì˜ ì½˜ì†” íƒ­ì—ì„œ ìƒì„¸í•œ ì˜¤ë¥˜ ë¡œê·¸ë¥¼ í™•ì¸í•˜ì„¸ìš”.`);
        }
      };
      
      // API í…ŒìŠ¤íŠ¸ ì„¹ì…˜ì— ë²„íŠ¼ë“¤ ì¶”ê°€
      const apiTestSection = document.querySelector('.api-test-section');
      if (apiTestSection) {
        apiTestSection.appendChild(testImageBtn);
        apiTestSection.appendChild(testUploadBtn);
        apiTestSection.appendChild(testRealFileBtn);
        apiTestSection.appendChild(checkApiStatusBtn);
        apiTestSection.appendChild(testS3CorsBtn);
      }
    });
  </script>

  <script src="/app.js"></script>
  
  <!-- ê°„ë‹¨í•œ ì¸ë¼ì¸ í…ŒìŠ¤íŠ¸ ìŠ¤í¬ë¦½íŠ¸ -->
  <script>
    console.log('ğŸ”§ ì¸ë¼ì¸ í…ŒìŠ¤íŠ¸ ìŠ¤í¬ë¦½íŠ¸ ë¡œë“œë¨');
    
    // DOM ë¡œë“œ ì™„ë£Œ í›„ ê°„ë‹¨í•œ í…ŒìŠ¤íŠ¸
    document.addEventListener('DOMContentLoaded', function() {
      console.log('ğŸ“‹ ì¸ë¼ì¸ ìŠ¤í¬ë¦½íŠ¸: DOM ë¡œë“œ ì™„ë£Œ');
      
      // ê¸°ë³¸ í…ŒìŠ¤íŠ¸ ë²„íŠ¼ ì°¾ê¸°
      const basicTestBtn = document.getElementById('basicTestBtn');
      if (basicTestBtn) {
        console.log('âœ… ì¸ë¼ì¸ ìŠ¤í¬ë¦½íŠ¸: ê¸°ë³¸ í…ŒìŠ¤íŠ¸ ë²„íŠ¼ ë°œê²¬');
        
        // ì¸ë¼ì¸ìœ¼ë¡œ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì¶”ê°€
        basicTestBtn.addEventListener('click', async function() {
          console.log('ğŸ§ª ì¸ë¼ì¸ ìŠ¤í¬ë¦½íŠ¸: ê¸°ë³¸ í…ŒìŠ¤íŠ¸ ë²„íŠ¼ í´ë¦­ë¨');
          try {
            const response = await fetch('/api/basic-test');
            const data = await response.json();
            console.log('ğŸ“¡ ì¸ë¼ì¸ ìŠ¤í¬ë¦½íŠ¸: ì‘ë‹µ ë°ì´í„°:', data);
            alert(`ê¸°ë³¸ í…ŒìŠ¤íŠ¸ ì„±ê³µ!\nìƒíƒœ: ${response.status}\nì‘ë‹µ: ${JSON.stringify(data, null, 2)}`);
          } catch (error) {
            console.error('âŒ ì¸ë¼ì¸ ìŠ¤í¬ë¦½íŠ¸: ì˜¤ë¥˜:', error);
            alert(`ê¸°ë³¸ í…ŒìŠ¤íŠ¸ ì‹¤íŒ¨!\nì˜¤ë¥˜: ${error.message}`);
          }
        });
      } else {
        console.error('âŒ ì¸ë¼ì¸ ìŠ¤í¬ë¦½íŠ¸: ê¸°ë³¸ í…ŒìŠ¤íŠ¸ ë²„íŠ¼ì„ ì°¾ì„ ìˆ˜ ì—†ìŒ');
      }
      
      // ê°„ë‹¨ Notion ë²„íŠ¼ ì°¾ê¸°
      const simpleNotionBtn = document.getElementById('simpleNotionBtn');
      if (simpleNotionBtn) {
        console.log('âœ… ì¸ë¼ì¸ ìŠ¤í¬ë¦½íŠ¸: ê°„ë‹¨ Notion ë²„íŠ¼ ë°œê²¬');
        
        // ì¸ë¼ì¸ìœ¼ë¡œ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì¶”ê°€
        simpleNotionBtn.addEventListener('click', async function() {
          console.log('ğŸ§ª ì¸ë¼ì¸ ìŠ¤í¬ë¦½íŠ¸: ê°„ë‹¨ Notion ë²„íŠ¼ í´ë¦­ë¨');
          try {
            const response = await fetch('/api/simple-notion-test');
            const data = await response.json();
            console.log('ğŸ“¡ ì¸ë¼ì¸ ìŠ¤í¬ë¦½íŠ¸: ì‘ë‹µ ë°ì´í„°:', data);
            alert(`ê°„ë‹¨ Notion í…ŒìŠ¤íŠ¸ ì„±ê³µ!\nìƒíƒœ: ${response.status}\nì‘ë‹µ: ${JSON.stringify(data, null, 2)}`);
          } catch (error) {
            console.error('âŒ ì¸ë¼ì¸ ìŠ¤í¬ë¦½íŠ¸: ì˜¤ë¥˜:', error);
            alert(`ê°„ë‹¨ Notion í…ŒìŠ¤íŠ¸ ì‹¤íŒ¨!\nì˜¤ë¥˜: ${error.message}`);
          }
        });
      } else {
        console.error('âŒ ì¸ë¼ì¸ ìŠ¤í¬ë¦½íŠ¸: ê°„ë‹¨ Notion ë²„íŠ¼ì„ ì°¾ì„ ìˆ˜ ì—†ìŒ');
      }
      
      // Notion ê°„ë‹¨ í…ŒìŠ¤íŠ¸ ë²„íŠ¼ ì°¾ê¸°
      const notionSimpleTestBtn = document.getElementById('notionSimpleTestBtn');
      if (notionSimpleTestBtn) {
        console.log('âœ… ì¸ë¼ì¸ ìŠ¤í¬ë¦½íŠ¸: Notion ê°„ë‹¨ í…ŒìŠ¤íŠ¸ ë²„íŠ¼ ë°œê²¬');
        
        // ì¸ë¼ì¸ìœ¼ë¡œ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì¶”ê°€
        notionSimpleTestBtn.addEventListener('click', async function() {
          console.log('ğŸ§ª ì¸ë¼ì¸ ìŠ¤í¬ë¦½íŠ¸: Notion ê°„ë‹¨ í…ŒìŠ¤íŠ¸ ë²„íŠ¼ í´ë¦­ë¨');
          try {
            const response = await fetch('/api/notion-simple-test');
            const data = await response.json();
            console.log('ğŸ“¡ ì¸ë¼ì¸ ìŠ¤í¬ë¦½íŠ¸: ì‘ë‹µ ë°ì´í„°:', data);
            alert(`Notion ê°„ë‹¨ í…ŒìŠ¤íŠ¸ ì„±ê³µ!\nìƒíƒœ: ${response.status}\nì‘ë‹µ: ${JSON.stringify(data, null, 2)}`);
          } catch (error) {
            console.error('âŒ ì¸ë¼ì¸ ìŠ¤í¬ë¦½íŠ¸: ì˜¤ë¥˜:', error);
            alert(`Notion ê°„ë‹¨ í…ŒìŠ¤íŠ¸ ì‹¤íŒ¨!\nì˜¤ë¥˜: ${error.message}`);
          }
        });
      } else {
        console.error('âŒ ì¸ë¼ì¸ ìŠ¤í¬ë¦½íŠ¸: Notion ê°„ë‹¨ í…ŒìŠ¤íŠ¸ ë²„íŠ¼ì„ ì°¾ì„ ìˆ˜ ì—†ìŒ');
      }
      
      // Echo í…ŒìŠ¤íŠ¸ ë²„íŠ¼ ì°¾ê¸°
      const echoTestBtn = document.getElementById('echoTestBtn');
      if (echoTestBtn) {
        console.log('âœ… ì¸ë¼ì¸ ìŠ¤í¬ë¦½íŠ¸: Echo í…ŒìŠ¤íŠ¸ ë²„íŠ¼ ë°œê²¬');
        
        // ì¸ë¼ì¸ìœ¼ë¡œ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì¶”ê°€
        echoTestBtn.addEventListener('click', async function() {
          console.log('ğŸ§ª ì¸ë¼ì¸ ìŠ¤í¬ë¦½íŠ¸: Echo í…ŒìŠ¤íŠ¸ ë²„íŠ¼ í´ë¦­ë¨');
          try {
            const response = await fetch('/api/echo');
            const data = await response.json();
            console.log('ğŸ“¡ ì¸ë¼ì¸ ìŠ¤í¬ë¦½íŠ¸: ì‘ë‹µ ë°ì´í„°:', data);
            alert(`Echo í…ŒìŠ¤íŠ¸ ì„±ê³µ!\nìƒíƒœ: ${response.status}\nì‘ë‹µ: ${JSON.stringify(data, null, 2)}`);
          } catch (error) {
            console.error('âŒ ì¸ë¼ì¸ ìŠ¤í¬ë¦½íŠ¸: ì˜¤ë¥˜:', error);
            alert(`Echo í…ŒìŠ¤íŠ¸ ì‹¤íŒ¨!\nì˜¤ë¥˜: ${error.message}`);
          }
        });
      } else {
        console.error('âŒ ì¸ë¼ì¸ ìŠ¤í¬ë¦½íŠ¸: Echo í…ŒìŠ¤íŠ¸ ë²„íŠ¼ì„ ì°¾ì„ ìˆ˜ ì—†ìŒ');
      }
    });
  </script>
</body>
</html>