<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Aqua.AI - ìˆ˜ì¤‘ ì‚¬ì§„ ìë™ë³´ì • ì„œë¹„ìŠ¤</title>
  <link rel="stylesheet" href="/styles.css" />
</head>
<body>
  <header class="nav">
    <a class="brand" href="/">Aqua.AI</a>
    <nav class="nav-links">
      <a href="/signin.html">ë¡œê·¸ì¸</a>
      <a href="/signup.html">íšŒì›ê°€ì…</a>
    </nav>
  </header>

  <main class="wrap">
    <section class="hero">
      <h1>ìˆ˜ì¤‘ ì‚¬ì§„ì„ ìë™ìœ¼ë¡œ ë³´ì •í•˜ì„¸ìš”</h1>
      <p class="hero-subtitle">
        AIê°€ ë¸”ë£¨/ê·¸ë¦° í†¤ì„ ì œê±°í•˜ê³  ìƒ‰ìƒì„ ë³µì›í•˜ì—¬ 
        ìˆ˜ì¤‘ì—ì„œ ì°ì€ ì‚¬ì§„ì„ ìì—°ìŠ¤ëŸ½ê²Œ ë§Œë“¤ì–´ë“œë¦½ë‹ˆë‹¤
      </p>
    </section>

    <section class="upload-section">
      <div class="card">
        <h2>ì´ë¯¸ì§€ ì—…ë¡œë“œ ë° ë³´ì •</h2>
        
        <!-- API í…ŒìŠ¤íŠ¸ ì„¹ì…˜ ì¶”ê°€ -->
        <div class="api-test-section" style="margin-bottom: 2rem; padding: 1rem; background: #f8f9fa; border-radius: 8px;">
          <h3>ğŸ”§ API ìƒíƒœ í™•ì¸</h3>
          <p>ë¬¸ì œ ì§„ë‹¨ì„ ìœ„í•´ API ìƒíƒœë¥¼ ë¨¼ì € í™•ì¸í•´ë³´ì„¸ìš”.</p>
          <button id="simpleApiBtn" class="btn btn-outline" style="margin-right: 10px;">ê°„ë‹¨ API í…ŒìŠ¤íŠ¸</button>
          <button id="apiTestBtn" class="btn btn-outline" style="margin-right: 10px;">API í…ŒìŠ¤íŠ¸</button>
          <button id="s3TestBtn" class="btn btn-outline" style="margin-right: 10px;">S3 í…ŒìŠ¤íŠ¸</button>
          <button id="envCheckBtn" class="btn btn-outline">í™˜ê²½ë³€ìˆ˜ í™•ì¸</button>
          <div id="apiTestResult" style="margin-top: 1rem; padding: 1rem; border-radius: 5px; font-family: monospace; font-size: 14px; display: none;"></div>
        </div>
        
        <div class="upload-area" id="uploadArea">
          <div class="upload-placeholder">
            <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
              <polyline points="7,10 12,15 17,10"/>
              <line x1="12" y1="15" x2="12" y2="3"/>
            </svg>
            <p>í´ë¦­í•˜ì—¬ ì´ë¯¸ì§€ë¥¼ ì„ íƒí•˜ê±°ë‚˜ ë“œë˜ê·¸í•˜ì—¬ ì—…ë¡œë“œí•˜ì„¸ìš”</p>
            <p class="upload-hint">JPG, PNG, HEIC ì§€ì› (ìµœëŒ€ 10MB)</p>
          </div>
          <input id="fileInput" type="file" accept="image/*" multiple />
        </div>

        <div class="enhancement-options">
          <h3>ë³´ì • ê°•ë„ ì„ íƒ</h3>
          <div class="option-buttons">
            <button class="option-btn active" data-level="auto">ìë™</button>
            <button class="option-btn" data-level="light">ì•½í•¨</button>
            <button class="option-btn" data-level="medium">ë³´í†µ</button>
            <button class="option-btn" data-level="strong">ê°•í•¨</button>
          </div>
        </div>

        <div class="user-info">
          <h3>ì‚¬ìš©ì ì •ë³´ (ì„ íƒì‚¬í•­)</h3>
          <input type="email" id="userEmail" placeholder="ì´ë©”ì¼ ì£¼ì†Œ (ì„ íƒì‚¬í•­)" />
          <p class="info-text">ì´ë©”ì¼ì„ ì…ë ¥í•˜ë©´ ì²˜ë¦¬ ê²°ê³¼ë¥¼ ì¶”ì í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
        </div>

        <button id="enhanceBtn" class="btn btn-primary" disabled>
          ì´ë¯¸ì§€ ë³´ì • ì‹œì‘
        </button>

        <div id="progressBar" class="progress-bar hidden">
          <div class="progress-fill"></div>
        </div>
      </div>
    </section>

    <section class="results-section hidden" id="resultsSection">
      <div class="card">
        <h2>ë³´ì • ê²°ê³¼</h2>
        <div id="resultsGrid" class="results-grid">
          <!-- ê²°ê³¼ ì´ë¯¸ì§€ë“¤ì´ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤ -->
        </div>
        <div class="results-actions">
          <button id="downloadAllBtn" class="btn btn-secondary">ì „ì²´ ë‹¤ìš´ë¡œë“œ</button>
          <button id="shareBtn" class="btn btn-outline">ê³µìœ í•˜ê¸°</button>
        </div>
      </div>
    </section>

    <section class="features">
      <div class="card">
        <h2>ì„œë¹„ìŠ¤ íŠ¹ì§•</h2>
        <div class="features-grid">
          <div class="feature">
            <h3>ğŸ¯ ìë™ ìƒ‰ìƒ ë³´ì •</h3>
            <p>ìˆ˜ì¤‘ í™˜ê²½ì˜ ë¸”ë£¨/ê·¸ë¦° í†¤ì„ ìë™ìœ¼ë¡œ ê°ì§€í•˜ê³  ì œê±°</p>
          </div>
          <div class="feature">
            <h3>âš¡ ë¹ ë¥¸ ì²˜ë¦¬</h3>
            <p>AI ê¸°ë°˜ìœ¼ë¡œ 10ì´ˆ ë‚´ì— ì´ë¯¸ì§€ ë³´ì • ì™„ë£Œ</p>
          </div>
          <div class="feature">
            <h3>ğŸ“± ëª¨ë“  ê¸°ê¸° ì§€ì›</h3>
            <p>ëª¨ë°”ì¼, íƒœë¸”ë¦¿, ë°ìŠ¤í¬í†±ì—ì„œ í¸ë¦¬í•˜ê²Œ ì‚¬ìš©</p>
          </div>
          <div class="feature">
            <h3>ğŸ”’ ì•ˆì „í•œ ì €ì¥</h3>
            <p>ì—…ë¡œë“œëœ ì´ë¯¸ì§€ëŠ” ìë™ìœ¼ë¡œ ì‚­ì œë˜ì–´ ê°œì¸ì •ë³´ ë³´í˜¸</p>
          </div>
        </div>
      </div>
    </section>

    <section class="pricing">
      <div class="card">
        <h2>ìš”ê¸ˆì œ</h2>
        <div class="pricing-grid">
          <div class="pricing-card">
            <h3>ë¬´ë£Œ</h3>
            <div class="price">â‚©0</div>
            <ul>
              <li>ì›” 5ì¥ ì´ë¯¸ì§€ ë³´ì •</li>
              <li>ê¸°ë³¸ ë³´ì • ê¸°ëŠ¥</li>
              <li>ì›¹ì—ì„œ ì§ì ‘ ì‚¬ìš©</li>
            </ul>
            <button class="btn btn-outline">ì‹œì‘í•˜ê¸°</button>
          </div>
          <div class="pricing-card featured">
            <h3>í”„ë¡œ</h3>
            <div class="price">â‚©19,900<span>/ì›”</span></div>
            <ul>
              <li>ì›” 100ì¥ ì´ë¯¸ì§€ ë³´ì •</li>
              <li>ê³ ê¸‰ ë³´ì • ì˜µì…˜</li>
              <li>ë°°ì¹˜ ì²˜ë¦¬</li>
              <li>ìš°ì„  ì§€ì›</li>
            </ul>
            <button class="btn btn-primary">í”„ë¡œ ì‹œì‘í•˜ê¸°</button>
          </div>
          <div class="pricing-card">
            <h3>ë¹„ì¦ˆë‹ˆìŠ¤</h3>
            <div class="price">â‚©49,900<span>/ì›”</span></div>
            <ul>
              <li>ì›” 1,000ì¥ ì´ë¯¸ì§€ ë³´ì •</li>
              <li>API ì ‘ê·¼</li>
              <li>ì „ìš© ì§€ì›</li>
              <li>ë§ì¶¤í˜• ì†”ë£¨ì…˜</li>
            </ul>
            <button class="btn btn-outline">ë¬¸ì˜í•˜ê¸°</button>
          </div>
        </div>
      </div>
    </section>
  </main>

  <footer class="foot">
    <div class="footer-content">
      <div class="footer-section">
        <h4>Aqua.AI</h4>
        <p>ìˆ˜ì¤‘ ì‚¬ì§„ì„ ì•„ë¦„ë‹µê²Œ ë§Œë“œëŠ” AI ì„œë¹„ìŠ¤</p>
      </div>
      <div class="footer-section">
        <h4>ì„œë¹„ìŠ¤</h4>
        <a href="/">í™ˆ</a>
        <a href="/upload.html">ì—…ë¡œë“œ</a>
        <a href="/pricing">ìš”ê¸ˆì œ</a>
      </div>
      <div class="footer-section">
        <h4>ì§€ì›</h4>
        <a href="/help">ë„ì›€ë§</a>
        <a href="/contact">ë¬¸ì˜</a>
        <a href="/privacy">ê°œì¸ì •ë³´ì²˜ë¦¬ë°©ì¹¨</a>
      </div>
    </div>
    <div class="footer-bottom">
      Â© 2024 Aqua.AI. All rights reserved.
    </div>
  </footer>

  <script>
    // ê°„ë‹¨í•œ ë””ë²„ê¹… ìŠ¤í¬ë¦½íŠ¸
    console.log('ğŸš€ index.html ë¡œë“œë¨');
    
    // DOM ë¡œë“œ ì™„ë£Œ í™•ì¸
    document.addEventListener('DOMContentLoaded', function() {
      console.log('ğŸ“‹ DOM ë¡œë“œ ì™„ë£Œ');
      
      // API í…ŒìŠ¤íŠ¸ ë²„íŠ¼ë“¤ í™•ì¸
      const simpleApiBtn = document.getElementById('simpleApiBtn');
      const apiTestBtn = document.getElementById('apiTestBtn');
      const s3TestBtn = document.getElementById('s3TestBtn');
      const envCheckBtn = document.getElementById('envCheckBtn');
      
      console.log('ğŸ”˜ ë²„íŠ¼ ìš”ì†Œë“¤:', {
        simpleApiBtn,
        apiTestBtn,
        s3TestBtn,
        envCheckBtn
      });
      
      // ê°„ë‹¨í•œ API í…ŒìŠ¤íŠ¸ í•¨ìˆ˜ë“¤ (ì„ì‹œ)
      if (simpleApiBtn) {
        simpleApiBtn.addEventListener('click', async function() {
          console.log('ğŸ” ê°„ë‹¨ API í…ŒìŠ¤íŠ¸ ë²„íŠ¼ í´ë¦­ë¨');
          const resultDiv = document.getElementById('apiTestResult');
          resultDiv.style.display = 'block';
          resultDiv.textContent = 'ê°„ë‹¨ API í…ŒìŠ¤íŠ¸ ì¤‘...';
          
          try {
            const response = await fetch('/api/test-simple');
            const data = await response.json();
            resultDiv.textContent = `âœ… ì„±ê³µ: ${JSON.stringify(data, null, 2)}`;
          } catch (error) {
            resultDiv.textContent = `âŒ ì˜¤ë¥˜: ${error.message}`;
          }
        });
        console.log('âœ… ê°„ë‹¨ API í…ŒìŠ¤íŠ¸ ë²„íŠ¼ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì¶”ê°€ë¨');
      }
      
      if (apiTestBtn) {
        apiTestBtn.addEventListener('click', async function() {
          console.log('ğŸ” API í…ŒìŠ¤íŠ¸ ë²„íŠ¼ í´ë¦­ë¨');
          const resultDiv = document.getElementById('apiTestResult');
          resultDiv.style.display = 'block';
          resultDiv.textContent = 'API í…ŒìŠ¤íŠ¸ ì¤‘...';
          
          try {
            const response = await fetch('/api/health');
            const data = await response.json();
            resultDiv.textContent = `âœ… ì„±ê³µ: ${JSON.stringify(data, null, 2)}`;
          } catch (error) {
            resultDiv.textContent = `âŒ ì˜¤ë¥˜: ${error.message}`;
          }
        });
        console.log('âœ… API í…ŒìŠ¤íŠ¸ ë²„íŠ¼ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì¶”ê°€ë¨');
      }
      
      if (s3TestBtn) {
        s3TestBtn.addEventListener('click', async function() {
          console.log('ğŸ” S3 í…ŒìŠ¤íŠ¸ ë²„íŠ¼ í´ë¦­ë¨');
          const resultDiv = document.getElementById('apiTestResult');
          resultDiv.style.display = 'block';
          resultDiv.textContent = 'S3 í…ŒìŠ¤íŠ¸ ì¤‘...';
          
          try {
            const response = await fetch('/api/presign-put', {
              method: 'POST',
              headers: { 'content-type': 'application/json' },
              body: JSON.stringify({
                filename: 'test-image.jpg',
                contentType: 'image/jpeg'
              })
            });
            const data = await response.json();
            resultDiv.textContent = `âœ… ì„±ê³µ: ${JSON.stringify(data, null, 2)}`;
          } catch (error) {
            resultDiv.textContent = `âŒ ì˜¤ë¥˜: ${error.message}`;
          }
        });
        console.log('âœ… S3 í…ŒìŠ¤íŠ¸ ë²„íŠ¼ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì¶”ê°€ë¨');
      }
      
      if (envCheckBtn) {
        envCheckBtn.addEventListener('click', async function() {
          console.log('ğŸ” í™˜ê²½ë³€ìˆ˜ í™•ì¸ ë²„íŠ¼ í´ë¦­ë¨');
          const resultDiv = document.getElementById('apiTestResult');
          resultDiv.style.display = 'block';
          resultDiv.textContent = 'í™˜ê²½ë³€ìˆ˜ í™•ì¸ ì¤‘...';
          
          try {
            const response = await fetch('/api/debug-env');
            const data = await response.json();
            resultDiv.textContent = `âœ… ì„±ê³µ: ${JSON.stringify(data, null, 2)}`;
          } catch (error) {
            resultDiv.textContent = `âŒ ì˜¤ë¥˜: ${error.message}`;
          }
        });
        console.log('âœ… í™˜ê²½ë³€ìˆ˜ í™•ì¸ ë²„íŠ¼ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì¶”ê°€ë¨');
      }
      
      // ì´ë¯¸ì§€ URL í…ŒìŠ¤íŠ¸ ê¸°ëŠ¥ ì¶”ê°€
      const testImageBtn = document.createElement('button');
      testImageBtn.textContent = 'ğŸ–¼ï¸ ì´ë¯¸ì§€ URL í…ŒìŠ¤íŠ¸';
      testImageBtn.className = 'btn btn-outline';
      testImageBtn.style.marginTop = '10px';
      testImageBtn.onclick = function() {
        const url = prompt('í…ŒìŠ¤íŠ¸í•  ì´ë¯¸ì§€ URLì„ ì…ë ¥í•˜ì„¸ìš”:');
        if (url) {
          console.log('ğŸ–¼ï¸ ì´ë¯¸ì§€ URL í…ŒìŠ¤íŠ¸:', url);
          const img = new Image();
          img.onload = function() {
            console.log('âœ… ì´ë¯¸ì§€ ë¡œë“œ ì„±ê³µ:', url);
            alert('ì´ë¯¸ì§€ ë¡œë“œ ì„±ê³µ!');
          };
          img.onerror = function() {
            console.log('âŒ ì´ë¯¸ì§€ ë¡œë“œ ì‹¤íŒ¨:', url);
            alert('ì´ë¯¸ì§€ ë¡œë“œ ì‹¤íŒ¨!');
          };
          img.src = url;
        }
      };
      
      // API í…ŒìŠ¤íŠ¸ ì„¹ì…˜ì— ì´ë¯¸ì§€ í…ŒìŠ¤íŠ¸ ë²„íŠ¼ ì¶”ê°€
      const apiTestSection = document.querySelector('.api-test-section');
      if (apiTestSection) {
        apiTestSection.appendChild(testImageBtn);
      }
    });
  </script>

  <script type="module" src="/app.js"></script>
</body>
</html>